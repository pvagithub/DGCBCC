(function(n){function u(){this.BS="\b";this.DEL="";this.EN="\r";this.SB="\x04";this._curInst=null;this._disabledFields=[];this._keypadShowing=!1;this.regional=[];this.regional[""]={buttonText:"...",buttonStatus:"Mở bàn phím",closeText:"Đóng",closeStatus:"Đóng bàn phím ảo",clearText:"Xóa",clearStatus:"Xóa tất cả ký tự",backText:"Xóa",backStatus:"Xóa từng ký tự",enterText:"Enter",enterStatus:"Carriage return",shiftText:"Hoa/Thường",shiftStatus:"Toggle upper/lower case characters",alphabeticLayout:this.qwertyAlphabetic,fullLayout:this.qwertyLayout,isAlphabetic:this.isAlphabetic,isNumeric:this.isNumeric,isRTL:!1};this._defaults={showOn:"focus",buttonImage:"",buttonImageOnly:!1,showAnim:"show",showOptions:{},duration:"normal",appendText:"",useThemeRoller:!1,keypadClass:"",prompt:"",layout:["123"+this.CLOSE,"456"+this.CLEAR,"789"+this.BACK,this.SPACE+"0"],separator:"",target:null,keypadOnly:!0,randomiseAlphabetic:!1,randomiseNumeric:!1,randomiseOther:!1,randomiseAll:!1,beforeShow:null,onKeypress:null,onClose:null};n.extend(this._defaults,this.regional[""]);this.mainDiv=n('<div class="'+this._mainDivClass+'" style="display: none;"><\/div>')}function l(t,i){n.extend(t,i);for(var r in i)(i[r]==null||i[r]==undefined)&&(t[r]=i[r]);return t}var t="keypad",f="\x00",e="\x01",o="\x02",s="\x03",h="\x04",i="\x05",r="\x06",c="\x07";n.extend(u.prototype,{CLOSE:f,CLEAR:e,BACK:o,SHIFT:s,SPACE_BAR:h,SPACE:i,HALF_SPACE:r,ENTER:c,qwertyAlphabetic:["qwertyuiop","asdfghjkl","zxcvbnm"],qwertyLayout:["!@#$%^&*()_="+r+i+f,r+"`~[]{}<>\\|/"+i+"789","qwertyuiop'\""+r+"456",r+"asdfghjkl;:"+i+"123",i+"zxcvbnm,.?"+i+r+"-0+",i+s+h+c+r+o+e],markerClassName:"hasKeypad",_mainDivClass:"keypad-popup",_inlineClass:"keypad-inline",_appendClass:"keypad-append",_triggerClass:"keypad-trigger",_disableClass:"keypad-disabled",_inlineEntryClass:"keypad-keyentry",_coverClass:"keypad-cover",setDefaults:function(n){return l(this._defaults,n||{}),this},_attachKeypad:function(t,i){var u=t.nodeName.toLowerCase()!="input"&&t.nodeName.toLowerCase()!="textarea",r={_inline:u,_mainDiv:u?n('<div class="'+this._inlineClass+'"><\/div>'):n.keypad.mainDiv,ucase:!1};r.settings=n.extend({},i||{});this._setInput(t,r);this._connectKeypad(t,r);u?(n(t).append(r._mainDiv).bind("click.keypad",function(){r._input.focus()}),this._updateKeypad(r)):n(t).is(":disabled")&&this._disableKeypad(t)},_setInput:function(t,i){i._input=n(i._inline?this._get(i,"target")||'<input type="text" class="'+this._inlineEntryClass+'" disabled="disabled"/>':t);i._inline&&(t=n(t),t.find("input").remove(),this._get(i,"target")||t.append(i._input))},_connectKeypad:function(i,r){var u=n(i),o,s,f;if(!u.hasClass(this.markerClassName)){if(o=this._get(r,"appendText"),s=this._get(r,"isRTL"),o&&u[s?"before":"after"]('<span class="'+this._appendClass+'">'+o+"<\/span>"),!r._inline&&(f=this._get(r,"showOn"),(f=="focus"||f=="both")&&u.focus(this._showKeypad).keydown(this._doKeyDown),f=="button"||f=="both")){var l=this._get(r,"buttonText"),e=this._get(r,"buttonStatus"),h=this._get(r,"buttonImage"),c=n(this._get(r,"buttonImageOnly")?n('<img src="'+h+'" alt="'+e+'" title="'+e+'"/>'):n('<button type="button" title="'+e+'"><\/button>').html(h==""?l:n('<img src="'+h+'" alt="'+e+'" title="'+e+'"/>')));u[s?"before":"after"](c);c.addClass(this._triggerClass).click(function(){return n.keypad._keypadShowing&&n.keypad._lastField==i?n.keypad._hideKeypad():n.keypad._showKeypad(i),!1})}r.saveReadonly=u.attr("readonly");u.addClass(this.markerClassName).attr("readonly",this._get(r,"keypadOnly")?"readonly":"").bind("setData.keypad",function(n,t,i){r.settings[t]=i}).bind("getData.keypad",function(n,t){return this._get(r,t)});n.data(i,t,r)}},_destroyKeypad:function(i){var u=n(i),r;u.hasClass(this.markerClassName)&&(r=n.data(i,t),this._curInst==r&&this._hideKeypad(),u.siblings("."+this._appendClass).remove().end().siblings("."+this._triggerClass).remove().end().prev("."+this._inlineEntryClass).remove(),u.empty().unbind("focus",this._showKeypad).removeClass(this.markerClassName).attr("readonly",r.saveReadonly),n.removeData(r._input[0],t),n.removeData(i,t))},_enableKeypad:function(i){var u=n(i),r,f;u.hasClass(this.markerClassName)&&(r=i.nodeName.toLowerCase(),r=="input"||r=="textarea"?(i.disabled=!1,u.siblings("button."+this._triggerClass).each(function(){this.disabled=!1}).end().siblings("img."+this._triggerClass).css({opacity:"1.0",cursor:""})):(r=="div"||r=="span")&&(u.children("."+this._disableClass).remove(),f=n.data(i,t),f._mainDiv.find("button").attr("disabled","")),this._disabledFields=n.map(this._disabledFields,function(n){return n==i?null:n}))},_disableKeypad:function(i){var u=n(i),r,s;if(u.hasClass(this.markerClassName)){if(r=i.nodeName.toLowerCase(),r=="input"||r=="textarea")i.disabled=!0,u.siblings("button."+this._triggerClass).each(function(){this.disabled=!0}).end().siblings("img."+this._triggerClass).css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var f=u.children("."+this._inlineClass),o=f.offset(),e={left:0,top:0};f.parents().each(function(){if(n(this).css("position")=="relative")return e=n(this).offset(),!1});u.prepend('<div class="'+this._disableClass+'" style="width: '+f.outerWidth()+"px; height: "+f.outerHeight()+"px; left: "+(o.left-e.left)+"px; top: "+(o.top-e.top)+'px;"><\/div>');s=n.data(i,t);s._mainDiv.find("button").attr("disabled","disabled")}this._disabledFields=n.map(this._disabledFields,function(n){return n==i?null:n});this._disabledFields[this._disabledFields.length]=i}},_isDisabledKeypad:function(t){return t&&n.inArray(t,this._disabledFields)>-1},_changeKeypad:function(i,r,u){var e=r||{},f;typeof r=="string"&&(e={},e[r]=u);f=n.data(i,t);f&&(this._curInst==f&&this._hideKeypad(),l(f.settings,e),this._setInput(n(i),f),this._updateKeypad(f))},_showKeypad:function(i){var r,u,o,f,e,s;(i=i.target||i,n.keypad._isDisabledKeypad(i)||n.keypad._lastField==i)||(r=n.data(i,t),n.keypad._hideKeypad(null,""),n.keypad._lastField=i,n.keypad._pos=n.keypad._findPos(i),n.keypad._pos[1]+=i.offsetHeight,u=!1,n(i).parents().each(function(){return u|=n(this).css("position")=="fixed",!u}),u&&n.browser.opera&&(n.keypad._pos[0]-=document.documentElement.scrollLeft,n.keypad._pos[1]-=document.documentElement.scrollTop),o={left:n.keypad._pos[0],top:n.keypad._pos[1]},n.keypad._pos=null,r._mainDiv.css({position:"absolute",display:"block",top:"-1000px",width:n.browser.opera?"1000px":"auto"}),n.keypad._updateKeypad(r),o=n.keypad._checkOffset(r,o,u),r._mainDiv.css({position:u?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),f=n.keypad._get(r,"showAnim"),e=n.keypad._get(r,"duration"),e=e=="normal"&&n.ui&&n.ui.version>="1.8"?"_default":e,s=function(){n.keypad._keypadShowing=!0;var t=n.keypad._getBorders(r._mainDiv);r._mainDiv.find("iframe."+n.keypad._coverClass).css({left:-t[0],top:-t[1],width:r._mainDiv.outerWidth(),height:r._mainDiv.outerHeight()})},n.effects&&n.effects[f]?r._mainDiv.show(f,n.keypad._get(r,"showOptions"),e,s):r._mainDiv[f||"show"](f?e:"",s),f||s(),r._input[0].type!="hidden"&&r._input[0].focus(),n.keypad._curInst=r)},_updateKeypad:function(n){var i=this._getBorders(n._mainDiv),t;n._mainDiv.empty().append(this._generateHTML(n)).find("iframe."+this._coverClass).css({left:-i[0],top:-i[1],width:n._mainDiv.outerWidth(),height:n._mainDiv.outerHeight()});n._mainDiv.removeClass().addClass(this._get(n,"keypadClass")+(this._get(n,"useThemeRoller")?" ui-widget ui-widget-content":"")+(this._get(n,"isRTL")?" keypad-rtl":"")+" "+(n._inline?this._inlineClass:this._mainDivClass));t=this._get(n,"beforeShow");t&&t.apply(n._input?n._input[0]:null,[n._mainDiv,n])},_getBorders:function(t){var i=function(t){var i=n.browser.msie?1:0;return{thin:1+i,medium:3+i,thick:5+i}[t]||t};return[parseFloat(i(t.css("border-left-width"))),parseFloat(i(t.css("border-top-width")))]},_checkOffset:function(t,i,r){var o=t._input?this._findPos(t._input[0]):null,s=window.innerWidth||document.documentElement.clientWidth,h=window.innerHeight||document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,f=document.documentElement.scrollTop||document.body.scrollTop,e;return(n.browser.msie&&parseInt(n.browser.version,10)<7||n.browser.opera)&&(e=0,t._mainDiv.find(":not(div,iframe)").each(function(){e=Math.max(e,this.offsetLeft+n(this).outerWidth()+parseInt(n(this).css("margin-right"),10))}),t._mainDiv.css("width",e)),this._get(t,"isRTL")||i.left+t._mainDiv.outerWidth()-u>s?i.left=Math.max(r?0:u,o[0]+(t._input?t._input.outerWidth():0)-(r?u:0)-t._mainDiv.outerWidth()-(r&&n.browser.opera?document.documentElement.scrollLeft:0)):i.left-=r?u:0,i.top+t._mainDiv.outerHeight()-f>h?i.top=Math.max(r?0:f,o[1]-(r?f:0)-t._mainDiv.outerHeight()-(r&&n.browser.opera?document.documentElement.scrollTop:0)):i.top-=r?f:0,i},_findPos:function(t){while(t&&(t.type=="hidden"||t.nodeType!=1))t=t.nextSibling;var i=n(t).offset();return[i.left,i.top]},_hideKeypad:function(i,r){var u=this._curInst,f,e;u&&(!i||u==n.data(i,t))&&(this._keypadShowing&&(r=r!=null?r:this._get(u,"duration"),r=r=="normal"&&n.ui&&n.ui.version>="1.8"?"_default":r,f=this._get(u,"showAnim"),n.effects&&n.effects[f]?u._mainDiv.hide(f,this._get(u,"showOptions"),r):u._mainDiv[f=="slideDown"?"slideUp":f=="fadeIn"?"fadeOut":"hide"](f?r:"")),e=this._get(u,"onClose"),e&&e.apply(u._input?u._input[0]:null,[u._input.val(),u]),this._keypadShowing&&(this._keypadShowing=!1,this._lastField=null),u._inline&&u._input.val(""),this._curInst=null)},_doKeyDown:function(t){t.keyCode==9&&(n.keypad.mainDiv.stop(!0,!0),n.keypad._hideKeypad())},_checkExternalClick:function(t){if(n.keypad._curInst){var i=n(t.target);i.parents().andSelf().is("."+n.keypad._mainDivClass)||i.hasClass(n.keypad.markerClassName)||i.parents().andSelf().hasClass(n.keypad._triggerClass)||!n.keypad._keypadShowing||n.keypad._hideKeypad()}},_shiftKeypad:function(n){n.ucase=!n.ucase;this._updateKeypad(n);n._input.focus()},_clearValue:function(t){this._setValue(t,"",0);this._notifyKeypress(t,n.keypad.DEL)},_backValue:function(t){var r=t._input[0],u=t._input.val(),i=[u.length,u.length];r.setSelectionRange?i=t._input.attr("readonly")||t._input.attr("disabled")?i:[r.selectionStart,r.selectionEnd]:r.createTextRange&&(i=t._input.attr("readonly")||t._input.attr("disabled")?i:this._getIERange(r));this._setValue(t,u.length==0?"":u.substr(0,i[0]-1)+u.substr(i[1]),i[0]-1);this._notifyKeypress(t,n.keypad.BS)},_selectValue:function(n,t){this.insertValue(n._input[0],t);this._setValue(n,n._input.val());this._notifyKeypress(n,t)},insertValue:function(t,i){var r;t=t.jquery?t:n(t);var u=t[0],f=t.val(),r=[f.length,f.length];u.setSelectionRange?r=t.attr("readonly")||t.attr("disabled")?r:[u.selectionStart,u.selectionEnd]:u.createTextRange&&(r=t.attr("readonly")||t.attr("disabled")?r:this._getIERange(u));t.val(f.substr(0,r[0])+i+f.substr(r[1]));pos=r[0]+i.length;t.css("display")!="none"&&t.focus();u.setSelectionRange?t.css("display")!="none"&&u.setSelectionRange(pos,pos):u.createTextRange&&(r=u.createTextRange(),r.move("character",pos),r.select())},_getIERange:function(n){var t,i;n.focus();t=document.selection.createRange().duplicate();i=this._getIETextRange(n);i.setEndPoint("EndToStart",t);var r=function(n){for(var t=n.text,i=t;;)if(n.compareEndPoints("StartToEnd",n)==0)break;else if(n.moveEnd("character",-1),n.text==t)i+="\r\n";else break;return i},u=r(i),f=r(t);return[u.length,u.length+f.length]},_getIETextRange:function(n){var t=n.nodeName.toLowerCase()=="input",i=t?n.createTextRange():document.body.createTextRange();return t||i.moveToElementText(n),i},_setValue:function(n,t){var i=n._input.attr("maxlength");i>-1&&(t=t.substr(0,i));n._input.val(t);this._get(n,"onKeypress")||n._input.trigger("change")},_notifyKeypress:function(n,t){var i=this._get(n,"onKeypress");i&&i.apply(n._input?n._input[0]:null,[t,n._input.val(),n])},_get:function(n,t){return n.settings[t]!==undefined?n.settings[t]:this._defaults[t]},_generateHTML:function(t){for(var r,i,e,o,u=this._get(t,"useThemeRoller"),a=this._get(t,"isRTL"),h=this._get(t,"prompt"),l=this._get(t,"separator"),f=h?'<div class="keypad-prompt'+(u?" ui-widget-header ui-corner-all":"")+'">'+h+"<\/div>":"",c=this._randomiseLayout(t),s=0;s<c.length;s++){for(f+='<div class="keypad-row">',r=c[s].split(l),i=0;i<r.length;i++)t.ucase&&(r[i]=r[i].toUpperCase()),f+=r[i]==this.SPACE?'<div class="keypad-space"><\/div>':r[i]==this.HALF_SPACE?'<div class="keypad-half-space"><\/div>':'<button type="button" class="keypad-key'+(u?" ui-state-default":"")+(r[i]==this.CLEAR?" keypad-clear"+(u?" ui-state-highlight":""):r[i]==this.BACK?" keypad-back"+(u?" ui-state-highlight":""):r[i]==this.CLOSE?" keypad-close"+(u?" ui-state-highlight":""):r[i]==this.SHIFT?" keypad-shift"+(u?" ui-state-highlight":""):r[i]==this.ENTER?" keypad-enter"+(u?" ui-state-highlight":""):r[i]==this.SPACE_BAR?" keypad-spacebar":"")+'" title="'+(r[i]==this.CLEAR?this._get(t,"clearStatus"):r[i]==this.BACK?this._get(t,"backStatus"):r[i]==this.ENTER?this._get(t,"enterStatus"):r[i]==this.CLOSE?this._get(t,"closeStatus"):r[i]==this.SHIFT?this._get(t,"shiftStatus"):"")+'">'+(r[i]==this.CLEAR?this._get(t,"clearText"):r[i]==this.BACK?this._get(t,"backText"):r[i]==this.CLOSE?this._get(t,"closeText"):r[i]==this.SHIFT?this._get(t,"shiftText"):r[i]==this.ENTER?this._get(t,"enterText"):r[i]==this.SPACE_BAR?"&nbsp;":r[i]==" "?"&nbsp;":r[i])+"<\/button>";f+="<\/div>"}return f+='<div style="clear: both;"><\/div>'+(!t._inline&&n.browser.msie&&parseInt(n.browser.version,10)<7?'<iframe src="javascript:false;" class="'+n.keypad._coverClass+'"><\/iframe>':""),f=n(f),e=t,o="keypad-key-down"+(u?" ui-state-active":""),f.find("button").mousedown(function(){n(this).addClass(o)}).mouseup(function(){n(this).removeClass(o)}).mouseout(function(){n(this).removeClass(o)}).filter(".keypad-clear").click(function(){n.keypad._clearValue(e)}).end().filter(".keypad-back").click(function(){n.keypad._backValue(e)}).end().filter(".keypad-close").click(function(){n.keypad._curInst=e._inline?e:n.keypad._curInst;n.keypad._hideKeypad()}).end().filter(".keypad-shift").click(function(){n.keypad._shiftKeypad(e)}).end().filter(".keypad-enter").click(function(){n.keypad._selectValue(e,n.keypad.EN)}).end().not(".keypad-clear").not(".keypad-back").not(".keypad-close").not(".keypad-shift").not(".keypad-enter").click(function(){n.keypad._selectValue(e,n(this).text())}),f},_randomiseLayout:function(n){var l=this._get(n,"randomiseNumeric"),a=this._get(n,"randomiseAlphabetic"),v=this._get(n,"randomiseOther"),e=this._get(n,"randomiseAll"),u=this._get(n,"layout"),r,i,t;if(!l&&!a&&!v&&!e)return u;var y=this._get(n,"isNumeric"),p=this._get(n,"isAlphabetic"),o=this._get(n,"separator"),s=[],h=[],f=[],c=[];for(r=0;r<u.length;r++)for(c[r]="",i=u[r].split(o),t=0;t<i.length;t++)this._isControl(i[t])||(e?f.push(i[t]):y(i[t])?s.push(i[t]):p(i[t])?h.push(i[t]):f.push(i[t]));l&&this._shuffle(s);a&&this._shuffle(h);(v||e)&&this._shuffle(f);var b=0,k=0,w=0;for(r=0;r<u.length;r++)for(i=u[r].split(o),t=0;t<i.length;t++)c[r]+=(this._isControl(i[t])?i[t]:e?f[w++]:y(i[t])?s[b++]:p(i[t])?h[k++]:f[w++])+o;return c},_isControl:function(n){return n<" "},isAlphabetic:function(n){return n>="A"&&n<="Z"||n>="a"&&n<="z"},isNumeric:function(n){return n>="0"&&n<="9"},_shuffle:function(n){for(var i,r,t=n.length-1;t>0;t--)i=Math.floor(Math.random()*n.length),r=n[t],n[t]=n[i],n[i]=r}});n.fn.keypad=function(t){var i=Array.prototype.slice.call(arguments,1);return t=="isDisabled"?n.keypad["_"+t+"Keypad"].apply(n.keypad,[this[0]].concat(i)):this.each(function(){typeof t=="string"?n.keypad["_"+t+"Keypad"].apply(n.keypad,[this].concat(i)):n.keypad._attachKeypad(this,t)})};n.keypad=new u;n(function(){n(document.body).append(n.keypad.mainDiv).mousedown(n.keypad._checkExternalClick)})})(jQuery);
//# sourceMappingURL=jquery.keypad.min.js.map
var matched, browser; jQuery.uaMatch = function (b) { b = b.toLowerCase(); var a = /(chrome)[ \/]([\w.]+)/.exec(b) || /(webkit)[ \/]([\w.]+)/.exec(b) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b) || /(msie) ([\w.]+)/.exec(b) || b.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b) || []; return { browser: a[1] || "", version: a[2] || "0" } }; matched = jQuery.uaMatch(navigator.userAgent); browser = {}; if (matched.browser) { browser[matched.browser] = true; browser.version = matched.version } if (browser.chrome) { browser.webkit = true } else { if (browser.webkit) { browser.safari = true } } jQuery.browser = browser;